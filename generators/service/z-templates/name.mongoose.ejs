
// Defines Mongoose model for service `<%= name %>`.
const deepMerge = require('deepmerge');
const mongoose = require('mongoose'); // eslint-disable-line no-unused-vars
<%- insertFragment('imports') %>
<%- insertFragment('init') %>

let moduleExports = deepMerge.all([{},
  <%- insertFragment('model', mongooseSchemaStr.split('\n').map(str => `  ${str}`).join('\n') + ',') %>
  <%- insertFragment('moduleExports') %>
]);

<%- insertFragment('exports') %>
module.exports = moduleExports;

<%- insertFragment('funcs') %>
<%- insertFragment('end') %>
