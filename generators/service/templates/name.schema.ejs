<% __defaultGraphqlName = serviceName.charAt(0).toUpperCase() + serviceName.slice(1) -%>

<%- insertFragment('imports') %>
<%- insertFragment('init') %>

let schema = {
  $schema: 'http://json-schema.org/draft-05/schema',
  <%- insertFragment('schema_header', [
    `  title: '${__defaultGraphqlName}',`,
    `  description: '${__defaultGraphqlName} database.',`,
  ]) %>
  type: 'object',
  required: [
    <%- insertFragment('schema_required') %>
  ],
  properties: {
    <%- insertFragment('schema_properties') %>
  },
  <%- insertFragment('schema_more') %>
};

let extension = {
  graphql: {
    <%- insertFragment('graphql_header', [
      `    // name: '${__defaultGraphqlName}',`,
      '    // service : {',
      '    //   sort: { __id__: 1 },',
      '    // },',
      '    // sql: {',
      `    //   sqlTable: '${__defaultGraphqlName}',`,
      '    //   uniqueKey: \'__id__\',',
      '    //   sqlColumn: {',
      '    //     __authorId__: \'__author_id__\',',
      '    //   }',
      '    // },',
    ]) %>,
    discard: [
      <%- insertFragment('graphql_discard') %>
    ],
    add: {
    <%- insertFragment('graphql_add', [
        '      // __author__: { type: \'__User__!\', args: false, relation: { ourTable: \'__authorId__\', otherTable: \'__id__\' } },',
    ])%>
    },
    <%- insertFragment('graphql_more') %>
  },
};

<%- insertFragment('more') %>

let moduleExports = {
  schema,
  extension,
  <%- insertFragment('moduleExports') %>
};

<%- insertFragment('exports') %>
module.exports = moduleExports;

<%- insertFragment('funcs') %>
<%- insertFragment('end') %>
