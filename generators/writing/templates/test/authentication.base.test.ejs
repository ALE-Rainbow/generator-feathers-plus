
<%- tplImports('{ join }', 'path') %>
<%- tplImports('{ authenticationBase }', '@feathers-plus/test-utils') %>
<%- tplImports('config', '../config/default.json') %>

// Determine if environment allows test to mutate existing DB data.
const env = (config.tests || {}).environmentsAllowingSeedData || []<%- sc %>
const dbChangesAllowed = env.indexOf(process.env.NODE_ENV) !== -1<%- sc %>
if (!dbChangesAllowed) {
  // eslint-disable-next-line no-console
  console.log('SKIPPED - Test authentication.base.<%- js -%>')<%- sc %>
<%- tplTsOnly('  // @ts-ignore') %>
  return<%- sc %>
}

const appRoot = join(__dirname, '..')<%- sc %>
authenticationBase(appRoot, {
  delayAfterServerOnce: 500,
  delayAfterServerClose: 500,
  timeoutForStartingServerAndClient: 30000,
  timeoutForClosingingServerAndClient: 30000
})<%- sc %>
