
// Execute raw SQL statement for GraphQL. (Can be re-generated.)
// <%- lintDisableNextLineUnused %>
const { cwd } = require('process')<%- sc %>
// <%- lintDisableNextLineUnused %>
const { join } = require('path')<%- sc %>
<%- insertFragment('imports') %>
<%- insertFragment('init') %>

<%- insertFragment('main', [
  `let dialect, openDb, executeSql${sc}`,
  `// const sqlite = require('sqlite')${sc}`,
  `// dialect = 'sqlite3'${sc}`,
  '',
  '// openDb = () => {',
  `//   sqlite.open(join(cwd(), 'data', 'sqlite3.db'))${sc}`,
  `//   return sqlite${sc}`,
  `// }${sc}`,
  '',
  '// executeSql = sql => sqlite.all(sql)',
  '//   .catch(err => {',
  `//     // ${lintDisableNextLine} no-console`,
  `//     console.log('executeSql error=', err.message)${sc}`,
  `//     throw err${sc}`,
  `//   })${sc}`,
]) %>

let moduleExports = {
  dialect,
  executeSql,
  openDb,
  <%- insertFragment('moduleExports') %>
}<%- sc %>

<%- insertFragment('more') %>

<%- insertFragment('exports') %>
<%- `${tplExport('moduleExports')}${sc}` %>

<%- insertFragment('funcs') %>
<%- insertFragment('end') %>
